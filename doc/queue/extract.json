{"gcpprovider": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "metadata": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "gcpprovider", "managed": true}, "identifier": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "id": "gcpprovider"}, "status": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "helmRelease": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "gcpprovider-rwhwh", "LatestVersion": "1.0.0"}, "kubernetesResources": [{"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "identifier": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "resourceId": {"group": "gcp.upbound.io", "version": "v1beta1", "resource": "ProviderConfig"}, "name": "gcp-provider", "namespace": "testgcp4odwkg"}}], "pluginReference": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "resourceReference": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "resourceType": "provider", "providerType": "gcp"}, "chartReference": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "chartName": "gcp-provider", "chartVersion": "0.1.0"}, "plugin": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "prerequisites": [{"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "message": "You must enable the Cloud Resource Manager API to use this plugin", "action": "gcloud services enable cloudresourcemanager.googleapis.com --project ${project_id}", "condition": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "assert": "gcloud services list --enabled --project $project_id | grep cloudresourcemanager.googleapis.com | wc -l", "equals": new NumberInt("1")}, "values": ["project_id"]}, {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "message": "You must grant the resourcemanager.projectCreator role to the user service account to use this plugin", "action": "gcloud organization add-iam-policy-binding $organization_name \\\n--member=\"user:${user_service_account_email}\" --role=roles/resourcemanager.projectCreator\"\n", "condition": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "assert": "gcloud projects get-iam-policy $project_id  --flatten=\"bindings[].members\" --format='table(bindings.role)' \\\n--filter=\"bindings.members:${user_service_account_email}\" | \\\ngrep roles/resourcemanager.projectCreator | wc -l\n", "equals": new NumberInt("1")}, "values": ["project_id", "user_service_account_email", "organization_name"]}, {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "message": "The project $project_id must exist", "action": "gcloud projects create $project_id\n", "condition": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "assert": "gcloud projects list | grep $project_id | wc -l\n", "equals": "1N"}, "values": ["project_id", "user_service_account_email", "organization_name"]}], "inputs": [{"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "vpc", "description": "The name of the GCP project where the infrastructure will be created", "type": "string", "required": true}, {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "auth", "description": "The type of authentication to use", "type": "auth", "required": true}], "types": [{"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "auth", "fields": {"type": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "", "description": "The type of authentication to use (secret, vault)", "type": "string", "required": true}, "secret": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "", "description": "The name of the secret containing the authentication information", "type": "secret", "required": true}}}, {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "secret", "fields": {"name": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "", "description": "Name of the secret to use", "type": "string", "required": true}, "key": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "", "description": "Key of the secret to use", "type": "string", "required": true}, "namespace": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "", "description": "Namespace of the secret to use (default: project namespace)", "type": "string"}}}]}}}, "auth": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "", "authType": "", "secretAuth": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "secretName": "gcp-secret", "secretKey": "credentials.json", "namespace": "gcptesttedwk"}, "secretVault": {}}, "vpcs": {}, "networks": {"test-net-78-lwzhhzbjfa": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "metadata": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "test-net-78", "managed": true}, "identifier": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "id": "test-net-78-lwzhhzbjfa", "providerId": "gcpprovider", "vpcId": ""}, "status": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "helmRelease": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "name": "test-net-78-lwzhhzbjfa-uftdu", "LatestVersion": "1.0.0"}, "kubernetesResources": [{"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "identifier": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "resourceId": {"group": "compute.gcp.upbound.io", "version": "v1beta1", "resource": "Network"}, "name": "test-net-78-lwzhhzbjfa", "namespace": "testgcp4odwkg"}}], "pluginReference": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "resourceReference": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "resourceType": "network", "providerType": "gcp"}, "chartReference": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "chartName": "gcp-net", "chartVersion": "0.1.0"}, "plugin": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "prerequisites": [{"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "message": "You must enable the Cloud Resource Manager API to use this plugin", "action": "gcloud services enable compute.googleapis.com --project ${project_id}", "condition": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "assert": "gcloud services list --enabled --project $project_id | grep compute.googleapis.com | wc -l", "equals": new NumberInt("1")}, "values": ["project_id"]}, {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "message": "You must grant the compute.networkAdmin role to the user service account to use this plugin", "action": "gcloud organization add-iam-policy-binding $organization_name \\\n--member=\"user:${user_service_account_email}\" --role=roles/compute.networkAdmin\"\n", "condition": {"created_at": new ISODate("0001-01-03T00:00:00.000Z"), "updated_at": new ISODate("0001-01-03T00:00:00.000Z"), "assert": "gcloud projects get-iam-policy $project_id  --flatten=\"bindings[].members\" --format='table(bindings.role)' \\\n--filter=\"bindings.members:${user_service_account_email}\" | \\\ngrep roles/compute.networkAdmin | wc -l\n", "equals": new NumberInt("1")}, "values": ["project_id", "user_service_account_email", "organization_name"]}], "inputs": null, "types": null}}}}}}}